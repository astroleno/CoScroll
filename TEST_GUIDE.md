# CoScroll 音频同步功能测试指南

## 修复概述
✅ **问题根因已解决**: jade-v4页面缺少音频和歌词同步组件集成
✅ **组件已集成**: LyricSync-v2组件已成功集成到jade-v4页面
✅ **路径问题已修复**: 修复了歌词文件加载路径问题

## 测试步骤

### 1. 访问测试页面
打开浏览器访问: http://localhost:3002/jade-v4

### 2. 基础功能验证
1. **检查页面结构**:
   - 左侧: 大字符锚字显示 (应该显示"观")
   - 右侧: 歌词滚动区域
   - 底部: 音频控制栏
   - 右上角: 3D模型调参面板

2. **检查歌词加载**:
   - 歌词应该正常显示，不应该显示"歌词加载中..."
   - 应该能看到心经的完整歌词列表

### 3. 音频播放测试
1. **点击播放按钮**:
   - 音频应该开始播放心经
   - 锚字应该随着播放自动变化
   - 当前播放的歌词应该高亮显示

2. **自动同步验证**:
   - 观察锚字是否随音频播放自动变化
   - 观察歌词是否自动滚动到当前播放位置

### 4. 交互功能测试
1. **进度条测试**:
   - 点击进度条的不同位置
   - 锚字应该立即变化到对应位置
   - 歌词应该滚动到对应位置

2. **滚动测试**:
   - 手动滚动歌词列表
   - 音频时间应该同步到对应的歌词位置
   - 锚字应该变化

3. **播放/暂停测试**:
   - 点击暂停按钮
   - 滚动应该停止
   - 点击播放，功能应该恢复

### 5. 调试信息查看

#### 浏览器控制台日志
打开开发者工具(F12)，查看控制台是否有以下正常日志:
```
🎵 歌词解析结果: {totalCount: 32, firstLyric: "观自在菩萨", ...}
🎵 修复验证信息: {lyricsLoaded: true, lyricsCount: 32, ...}
✅ 音频播放成功
🌊 连续滚动已启用
```

#### 网络请求检查
在Network标签页检查:
- `/lyrics/心经.lrc` - 状态码200，大小约1.2KB
- `/audio/心经.mp3` - 状态码200，大小约15MB

### 6. 问题诊断

如果遇到问题，在浏览器控制台运行测试脚本:
```javascript
// 复制test-audio-sync.js中的内容到控制台运行
fetch('/lyrics/心经.lrc').then(r=>r.text()).then(t=>console.log('歌词前100字符:', t.substring(0,100)));
```

### 7. 预期结果
✅ **正常工作状态**:
- 音频自动播放心经
- 锚字随音频播放自动变化
- 歌词高亮和滚动同步
- 手动操作（进度条、滚动）正常响应
- 3D背景正常渲染和旋转

❌ **如果仍有问题**:
1. 检查浏览器控制台错误信息
2. 确认音频文件已加载
3. 确认歌词文件已加载
4. 检查是否有JavaScript错误

### 8. 调试提示
- 如果歌词不显示: 检查控制台是否有歌词加载错误
- 如果锚字不变化: 检查音频是否正常播放
- 如果滚动不工作: 检查continuousScroll是否启用
- 如果进度条无响应: 检查handleProgressClick事件是否正常

## 技术细节
- **音频文件**: `/audio/心经.mp3` (15MB)
- **歌词文件**: `/lyrics/心经.lrc` (1.2KB, 32句)
- **锚字提取**: 每句歌词的第一个字
- **同步精度**: 100ms级同步
- **循环播放**: 支持音频自动循环和状态重置

请按照此指南逐步测试功能，如有问题请记录具体的错误信息和现象。